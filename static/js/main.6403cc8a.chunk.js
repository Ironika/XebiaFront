(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports={back:"_Cart_back__2tBa0",cart:"_Cart_cart__34E7B",cartItem:"_Cart_cartItem__18V_U",totalPrice:"_Cart_totalPrice__1vJ0W",offer:"_Cart_offer__1TRR2",total:"_Cart_total__RZlhK"}},17:function(e,t,a){e.exports=a.p+"static/media/cart.a9de90c1.svg"},19:function(e,t,a){e.exports=a.p+"static/media/arrow.dc9e5ab2.svg"},22:function(e,t,a){e.exports={title:"_Home_title__me0BM",cart:"_Home_cart__38MtJ",search:"_Home_search__1z5GR"}},39:function(e,t,a){e.exports=a.p+"static/media/loader.e5e401e3.gif"},43:function(e,t,a){e.exports={synopsis:"_DetailCard_synopsis__1jqyb"}},44:function(e,t,a){e.exports={back:"_Detail_back__2TfbR"}},48:function(e,t,a){e.exports=a(79)},53:function(e,t,a){},76:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),c=a.n(l),o=(a(53),a(54),a(45)),i=a(11),s=a(7),u=a.n(s),d=a(12),m=a(15),h=a(16),p=a(20),k=a(18),b=a(21),f=a(39),E=a.n(f),v=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:E.a,alt:"loader"}))},_=a(56),C=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getBooks",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get("http://henri-potier.xebia.fr/books");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getOffers",value:function(){var e=Object(d.a)(u.a.mark(function e(t){var a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in"http://henri-potier.xebia.fr/books/",a="",t)Number(r)===t.length-1?a+=t[r].isbn+"/commercialOffers":a+=t[r].isbn+",";return e.next=4,_.get("http://henri-potier.xebia.fr/books/"+a);case 4:return n=e.sent,e.abrupt("return",n.data.offers);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"calculOffer",value:function(e,t){var a=[];for(var n in t)"percentage"===t[n].type&&a.push(Math.round(t[n].value/100*e)),"minus"===t[n].type&&a.push(t[n].value),"slice"===t[n].type&&a.push(Math.floor(e/t[n].sliceValue)*t[n].value);return(a=a.sort(function(e,t){return e<t?1:e>t?-1:0}))[0]}},{key:"isInCart",value:function(e,t){for(var a in e)if(e[a].isbn===t.isbn)return!0;return!1}},{key:"getBookInCart",value:function(e,t){for(var a in e)if(e[a].isbn===t.isbn)return e[a];return null}},{key:"getTotalInCart",value:function(e){var t=0;for(var a in e)t+=Number(e[a].quantity)*Number(e[a].price);return Number(t)}},{key:"getTotalItemInCart",value:function(e){var t=0;for(var a in e)t+=Number(e[a].quantity);return Number(t)}}]),e}(),g=a(82),y=a(80),x=a(81),O=a(22),N=a.n(O),w=a(17),B=a.n(w),I=a(40),j=a.n(I),T=a(9),S=a.n(T),P=function(e){return r.a.createElement(j.a,{className:S.a.tilt,options:{max:30}},r.a.createElement("div",{className:S.a.tiltInner,onClick:e.goToDetail&&e.goToDetail.bind(void 0,e.book)},r.a.createElement("div",{className:S.a.backgroundCover,style:{backgroundImage:"url("+e.book.cover+")"}},r.a.createElement("div",{className:e.full?S.a.cardContentFull:S.a.cardContent},r.a.createElement("div",{className:S.a.cardBody},r.a.createElement("div",{className:S.a.cardTitle},e.book.title)),r.a.createElement("div",{className:S.a.iconsLeft},r.a.createElement("span",null,e.book.price,"\u20ac")),r.a.createElement("div",{className:S.a.iconsRight},r.a.createElement("img",{onClick:e.add.bind(void 0,e.book),className:S.a.icon,src:B.a,alt:"icon cart"}))))))},D=function(e){return r.a.createElement(y.a,null,e.books&&0===e.books.length?r.a.createElement("div",{style:{color:"white"}},"Aucun R\xe9sultats"):e.books.map(function(t,a){return r.a.createElement(x.a,{xs:12,sm:6,md:4,lg:3,key:a},r.a.createElement(P,{book:t,add:e.add.bind(void 0),goToDetail:e.goToDetail.bind(void 0)}))}))},R=a(43),F=a.n(R),A=function(e){return r.a.createElement("div",{className:F.a.synopsis},r.a.createElement("h2",null,"Synopsis :"),r.a.createElement("p",null,e.book.synopsis),r.a.createElement("div",{onClick:e.add.bind(void 0,e.book)},r.a.createElement("img",{src:B.a,alt:"icon cart"}),r.a.createElement("br",null),"Ajouter au panier"))},q=a(44),H=a.n(q),M=a(19),J=a.n(M),L=function(e){return r.a.createElement(y.a,null,r.a.createElement(x.a,{xs:12},r.a.createElement("div",{className:H.a.back,onClick:e.back.bind(void 0,"detail")},r.a.createElement("img",{src:J.a,alt:"back"}),r.a.createElement("span",null,"Retour"))),r.a.createElement(x.a,{xs:12,sm:4},r.a.createElement(P,{book:e.book,add:e.add.bind(void 0),full:!0})),r.a.createElement(x.a,{xs:12,sm:8},r.a.createElement(A,{book:e.book,add:e.add.bind(void 0)})))},V=a(14),G=a.n(V),K=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(k.a)(t).call(this,e))).state={loader:!0,totalPrice:0,offer:0,total:0},a.helper=new C,a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.helper.getTotalInCart(this.props.cart),e.next=3,this.helper.getOffers(this.props.cart);case 3:a=e.sent,n=this.helper.calculOffer(t,a),r=t-n,this.setState({totalPrice:t,offer:n,total:r,loader:!1});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.loader?r.a.createElement(v,null):r.a.createElement(y.a,null,r.a.createElement(x.a,{xs:12},r.a.createElement("div",{className:G.a.back,onClick:this.props.back&&this.props.back.bind(this,"cart")},r.a.createElement("img",{src:J.a,alt:"back"}),r.a.createElement("span",null,"Retour"))),r.a.createElement(x.a,{xs:12},r.a.createElement("div",{className:G.a.cart},r.a.createElement("h2",null,"Votre Panier"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nom"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Prix Total"))),r.a.createElement("tbody",null,this.props.cart&&this.props.cart.map(function(e,t){return r.a.createElement("tr",{key:t,className:G.a.cartItem},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.price,"\u20ac"),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,Number(e.quantity)*Number(e.price),"\u20ac"))}),r.a.createElement("tr",{className:G.a.totalPrice},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Prix Total"),r.a.createElement("td",null,this.state.totalPrice,"\u20ac")),r.a.createElement("tr",{className:G.a.offer},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Offer"),r.a.createElement("td",null,this.state.offer,"\u20ac")),r.a.createElement("tr",{className:G.a.total},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Total"),r.a.createElement("td",null,this.state.total,"\u20ac"))))))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(k.a)(t).call(this,e))).helper=new C,a.state={loader:!0,books:[],booksFiltered:[],book:{},cart:[],detailIsOpen:!1,cartIsOpen:!1,search:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.helper.getBooks();case 2:t=e.sent,this.setState({loader:!1,books:t,booksFiltered:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClickAddCart",value:function(e,t){t.stopPropagation();var a=this.state.cart;this.helper.isInCart(a,e)?this.helper.getBookInCart(a,e).quantity+=1:(e.quantity=1,a.push(e)),this.setState(a)}},{key:"handleClickDetail",value:function(e){this.setState({detailIsOpen:!0,book:e})}},{key:"handleClickBack",value:function(e){"cart"===e?this.setState({cartIsOpen:!1}):this.setState({detailIsOpen:!1,book:{}})}},{key:"handleClickCart",value:function(){this.state.cart.length>0&&this.setState({cartIsOpen:!0})}},{key:"handleChangeSearch",value:function(e){var t=this.filterBooks(e.target.value);this.setState({search:e.target.value,booksFiltered:t})}},{key:"filterBooks",value:function(e){var t=this.state.books;return""!==e&&(t=this.state.books.filter(function(t){return t.title.toLowerCase().includes(e)})),t}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.loader?r.a.createElement(v,null):r.a.createElement(g.a,null,r.a.createElement(y.a,null,r.a.createElement(x.a,null,r.a.createElement("h1",{className:N.a.title},"Henri Potier"),r.a.createElement("span",{className:N.a.cart,onClick:this.handleClickCart.bind(this)},r.a.createElement("img",{src:B.a,alt:"icon cart"}),r.a.createElement("span",null,this.helper.getTotalItemInCart(this.state.cart))))),!this.state.cartIsOpen&&!this.state.detailIsOpen&&r.a.createElement(y.a,null,r.a.createElement(x.a,null,r.a.createElement("div",{className:N.a.search},r.a.createElement("input",{type:"text",value:this.state.search,onChange:this.handleChangeSearch.bind(this),placeholder:"Search your book"})))),this.state.cartIsOpen?r.a.createElement(K,{cart:this.state.cart,back:this.handleClickBack.bind(this)}):this.state.detailIsOpen?r.a.createElement(L,{book:this.state.book,add:this.handleClickAddCart.bind(this),back:this.handleClickBack.bind(this)}):r.a.createElement(D,{books:this.state.booksFiltered,add:this.handleClickAddCart.bind(this),goToDetail:this.handleClickDetail.bind(this)})))}}]),t}(n.Component);a(76);var U=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",name:"Home",component:W}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports={backgroundCover:"_BookCard_backgroundCover__cAEwK",tilt:"_BookCard_tilt__aGerK",cardContent:"_BookCard_cardContent__6SGc6",cardBody:"_BookCard_cardBody__3w_k5",cardTitle:"_BookCard_cardTitle__U3vxF",cardContentFull:"_BookCard_cardContentFull__3S33w",iconsLeft:"_BookCard_iconsLeft__avZ1A",icon:"_BookCard_icon__2yVwx",iconsRight:"_BookCard_iconsRight__14fb-",buy:"_BookCard_buy__3OHTB"}}},[[48,1,2]]]);
//# sourceMappingURL=main.6403cc8a.chunk.js.map