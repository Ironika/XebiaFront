(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports={back:"_Cart_back__2tBa0",cart:"_Cart_cart__34E7B",cartItem:"_Cart_cartItem__18V_U",totalPrice:"_Cart_totalPrice__1vJ0W",offer:"_Cart_offer__1TRR2",total:"_Cart_total__RZlhK"}},15:function(e,t,a){e.exports=a.p+"static/media/cart.a9de90c1.svg"},19:function(e,t,a){e.exports=a.p+"static/media/arrow.dc9e5ab2.svg"},22:function(e,t,a){e.exports={title:"_Home_title__me0BM",cart:"_Home_cart__38MtJ",search:"_Home_search__1z5GR"}},39:function(e,t,a){e.exports=a.p+"static/media/loader.e5e401e3.gif"},43:function(e,t,a){e.exports={synopsis:"_DetailCard_synopsis__1jqyb"}},44:function(e,t,a){e.exports={back:"_Detail_back__2TfbR"}},48:function(e,t,a){e.exports=a(79)},53:function(e,t,a){},76:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),c=a.n(l),o=(a(53),a(54),a(45)),i=a(11),s=a(7),u=a.n(s),m=a(12),d=a(16),p=a(17),h=a(20),f=a(18),k=a(21),b=a(39),E=a.n(b),_=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:E.a,alt:"loader"}))},v=a(82),C=a(80),g=a(81),y=a(22),N=a.n(y),x=a(15),O=a.n(x),w=a(40),B=a.n(w),S=a(9),j=a.n(S),I=function(e){return r.a.createElement(B.a,{className:j.a.tilt,options:{max:30}},r.a.createElement("div",{className:j.a.tiltInner,"data-book":JSON.stringify(e.book),onClick:e.goToDetail&&e.goToDetail},r.a.createElement("div",{className:j.a.backgroundCover,style:{backgroundImage:"url("+e.book.cover+")"}},r.a.createElement("div",{className:e.full?j.a.cardContentFull:j.a.cardContent},r.a.createElement("div",{className:j.a.cardBody},r.a.createElement("div",{className:j.a.cardTitle},e.book.title)),r.a.createElement("div",{className:j.a.iconsLeft},r.a.createElement("span",null,e.book.price,"\u20ac")),r.a.createElement("div",{className:j.a.iconsRight},r.a.createElement("img",{"data-book":JSON.stringify(e.book),onClick:e.add,className:j.a.icon,src:O.a,alt:"icon cart"}))))))},T=function(e){return r.a.createElement(C.a,null,e.books&&0===e.books.length?r.a.createElement("div",{style:{color:"white"}},"Aucun R\xe9sultats"):e.books.map(function(t,a){return r.a.createElement(g.a,{xs:12,sm:6,md:4,lg:3,key:a},r.a.createElement(I,{book:t,add:e.add,goToDetail:e.goToDetail}))}))},P=a(43),D=a.n(P),R=function(e){return r.a.createElement("div",{className:D.a.synopsis},r.a.createElement("h2",null,"Synopsis :"),r.a.createElement("p",null,e.book.synopsis),r.a.createElement("div",{"data-book":JSON.stringify(e.book),onClick:e.add},r.a.createElement("img",{src:O.a,alt:"icon cart"}),r.a.createElement("br",null),"Ajouter au panier"))},A=a(44),F=a.n(A),J=a(19),q=a.n(J),H=function(e){return r.a.createElement(C.a,null,r.a.createElement(g.a,{xs:12},r.a.createElement("div",{className:F.a.back,onClick:e.back},r.a.createElement("img",{src:q.a,alt:"back"}),r.a.createElement("span",null,"Retour"))),r.a.createElement(g.a,{xs:12,sm:4},r.a.createElement(I,{book:e.book,add:e.add,full:!0})),r.a.createElement(g.a,{xs:12,sm:8},r.a.createElement(R,{book:e.book,add:e.add})))},M=a(14),L=a.n(M),V=a(58);function G(e){return K.apply(this,arguments)}function K(){return(K=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("http://henri-potier.xebia.fr/books");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(u.a.mark(function e(t){var a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in"http://henri-potier.xebia.fr/books/",a="",t)Number(r)===t.length-1?a+=t[r].isbn+"/commercialOffers":a+=t[r].isbn+",";return e.next=4,V.get("http://henri-potier.xebia.fr/books/"+a);case 4:return n=e.sent,e.abrupt("return",n.data.offers);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e,t){var a=[];for(var n in t)"percentage"===t[n].type&&a.push(Math.round(t[n].value/100*e)),"minus"===t[n].type&&a.push(t[n].value),"slice"===t[n].type&&a.push(Math.floor(e/t[n].sliceValue)*t[n].value);return(a=a.sort(function(e,t){return e<t?1:e>t?-1:0}))[0]}function z(e){var t=0;for(var a in e)t+=Number(e[a].quantity)*Number(e[a].price);return Number(t)}var Q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={loader:!0,totalPrice:0,offer:0,total:0},a}return Object(k.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=z(this.props.cart),e.next=3,W(this.props.cart);case 3:a=e.sent,n=Z(t,a),r=t-n,!1,this.setState({totalPrice:t,offer:n,total:r,loader:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.loader?r.a.createElement(_,null):r.a.createElement(C.a,null,r.a.createElement(g.a,{xs:12},r.a.createElement("div",{className:L.a.back,onClick:this.props.back&&this.props.back},r.a.createElement("img",{src:q.a,alt:"back"}),r.a.createElement("span",null,"Retour"))),r.a.createElement(g.a,{xs:12},r.a.createElement("div",{className:L.a.cart},r.a.createElement("h2",null,"Votre Panier"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nom"),r.a.createElement("th",null,"Prix"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Prix Total"))),r.a.createElement("tbody",null,this.props.cart&&this.props.cart.map(function(e,t){return r.a.createElement("tr",{key:t,className:L.a.cartItem},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.price,"\u20ac"),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,Number(e.quantity)*Number(e.price),"\u20ac"))}),r.a.createElement("tr",{className:L.a.totalPrice},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Prix Total"),r.a.createElement("td",null,this.state.totalPrice,"\u20ac")),r.a.createElement("tr",{className:L.a.offer},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Offer"),r.a.createElement("td",null,this.state.offer,"\u20ac")),r.a.createElement("tr",{className:L.a.total},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,"Total"),r.a.createElement("td",null,this.state.total,"\u20ac"))))))))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(f.a)(t).call(this,e))).handleClickAddCart=function(e){e.stopPropagation();var t=JSON.parse(e.currentTarget.getAttribute("data-book")),n=a.state.cart;!function(e,t){for(var a in e)if(e[a].isbn===t.isbn)return!0;return!1}(n,t)?(t.quantity=1,n.push(t)):(function(e,t){for(var a in e)if(e[a].isbn===t.isbn)return e[a];return null}(n,t)).quantity+=1,a.setState(n)},a.handleClickDetail=function(e){var t=JSON.parse(e.currentTarget.getAttribute("data-book"));a.setState({detailIsOpen:!0,book:t})},a.handleClickBack=function(){a.setState({detailIsOpen:!1,book:{}})},a.handleClickBackCart=function(){a.setState({cartIsOpen:!1})},a.handleClickCart=function(){var e=!1;a.state.cart.length>0&&(e=!0),a.setState({cartIsOpen:e})},a.handleChangeSearch=function(e){var t=e.target.value,n=a.filterBooks(t);a.setState({search:t,booksFiltered:n})},a.filterBooks=function(e){var t=a.state.books;return""!==e&&(t=a.state.books.filter(function(t){return t.title.toLowerCase().includes(e)})),t},a.state={loader:!0,books:[],booksFiltered:[],book:{},cart:[],detailIsOpen:!1,cartIsOpen:!1,search:""},a}return Object(k.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,!1,a=t,this.setState({loader:!1,books:t,booksFiltered:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.loader?r.a.createElement(_,null):r.a.createElement(v.a,null,r.a.createElement(C.a,null,r.a.createElement(g.a,null,r.a.createElement("h1",{className:N.a.title},"Henri Potier"),r.a.createElement("span",{className:N.a.cart,onClick:this.handleClickCart},r.a.createElement("img",{src:O.a,alt:"icon cart"}),r.a.createElement("span",null,function(e){var t=0;for(var a in e)t+=Number(e[a].quantity);return Number(t)}(this.state.cart))))),!this.state.cartIsOpen&&!this.state.detailIsOpen&&r.a.createElement(C.a,null,r.a.createElement(g.a,null,r.a.createElement("div",{className:N.a.search},r.a.createElement("input",{type:"text",value:this.state.search,onChange:this.handleChangeSearch,placeholder:"Search your book"})))),this.state.cartIsOpen?r.a.createElement(Q,{cart:this.state.cart,back:this.handleClickBackCart}):this.state.detailIsOpen?r.a.createElement(H,{book:this.state.book,add:this.handleClickAddCart,back:this.handleClickBack}):r.a.createElement(T,{books:this.state.booksFiltered,add:this.handleClickAddCart,goToDetail:this.handleClickDetail})))}}]),t}(n.Component);a(76);var X=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",name:"Home",component:$}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports={backgroundCover:"_BookCard_backgroundCover__cAEwK",tilt:"_BookCard_tilt__aGerK",cardContent:"_BookCard_cardContent__6SGc6",cardBody:"_BookCard_cardBody__3w_k5",cardTitle:"_BookCard_cardTitle__U3vxF",cardContentFull:"_BookCard_cardContentFull__3S33w",iconsLeft:"_BookCard_iconsLeft__avZ1A",icon:"_BookCard_icon__2yVwx",iconsRight:"_BookCard_iconsRight__14fb-",buy:"_BookCard_buy__3OHTB"}}},[[48,1,2]]]);
//# sourceMappingURL=main.0c7ed76d.chunk.js.map